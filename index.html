<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Agent Mission Stages</title>
    <style>
      body {
        background-color: #000;
        color: #fff;
        font-family: Consolas, monospace;
        margin: 0;
        padding: 20px;
      }
      .stage {
        display: none;
      }
      .active {
        display: block;
      }
      #controls {
        margin-top: 20px;
        text-align: center;
      }
      button {
        background: #333;
        color: #fff;
        border: none;
        padding: 10px 20px;
        margin: 5px;
        font-size: 16px;
        cursor: pointer;
      }
      button:hover {
        background: #555;
      }
    </style>
  </head>
  <body>
    <div id="stageContainer">
      <!-- Stage 1 -->
      <div class="stage active">
        <h1>Welcome Agent.</h1>
        <p>Your first mission: retrieve the access key.</p>
        <p>Hint: ‚ÄúSometimes, secrets lie in reversed reality.‚Äù</p>

        <!-- begin-log -->
        <!-- system-init: true -->
        <!-- user: player_01 -->
        <!-- secure-id: 09183-xyz -->
        <!-- stage: 1 -->
        <!-- encoded-msg: 90Xez@ssap -->
        <!-- log-end -->

        <script>
          const password = atob("d2FybmluZzEyMw=="); // "warning123"
          console.log("Access Denied");
        </script>
      </div>

      <!-- Stage 2 -->
      <div class="stage">
        <h1>Welcome Back, Agent.</h1>
        <p>The shadows hold the truth, but not as they seem.</p>
        <p>Hint: ‚ÄúReflections may correct the distorted.‚Äù</p>

        <!-- --BEGIN-ECHO-- -->
        <!-- data-packet: 321tn0m@drowssap -->
        <!-- echo-channel: 4558:enabled -->
        <!-- trace-flag: false -->
        <!-- --END-ECHO-- -->

        <script>
          function unusedDecode(str) {
            return str
              .split("")
              .map((c) => String.fromCharCode(c.charCodeAt(0) + 1))
              .join("");
          }

          const accessOverride = btoa("redherring");
          console.warn("System Unstable");
        </script>
      </div>

      <!-- Stage 3 -->
      <div class="stage">
        <h1>Agent, you‚Äôve intercepted a corrupted transmission.</h1>
        <p>Hint: ‚ÄúFragments form the truth when placed in sequence.‚Äù</p>

        <!-- signal-frag-1: p4ss -->
        <!-- trace-id: 777x -->
        <!-- signal-frag-3: ector -->
        <!-- deprecated: true -->
        <!-- signal-frag-2: r3d_d -->
        <!-- internal-ref: 9982 -->

        <script>
          const tempKey = atob("bG9zdGZpbGU="); // "lostfile"
          console.error("Decryption failed: Missing fragments.");
        </script>
      </div>

      <!-- Stage 4 -->
      <div class="stage">
        <h1>Decrypt the Silence</h1>
        <p>
          You‚Äôve reached the gate. The key is within this file ‚Äî but not in the
          usual form.
        </p>

        <script>
          let fakeCode = "tryThisInstead";
          console.warn("You're looking in the wrong place üëÄ");
        </script>
      </div>

      <!-- Stage 5 -->
      <div class="stage">
        <h1>Echo Layer</h1>
        <p>
          The answer is not displayed openly ‚Äî but it still exists somewhere in
          the page.
        </p>
        <p>
          Hint: "Look for clues in the page‚Äôs hidden elements(invisicode), where secrets can
          be encoded in plain sight."
        </p>

        <p class="secret"></p>

        <script>
          console.log("System status: Secure");
        </script>
      </div>
    </div>

    <!-- Controls -->
    <div id="controls">
      <button onclick="prevStage()">Previous</button>
      <button onclick="nextStage()">Next</button>
    </div>

    <script>
      let currentStage = 0;
      const stages = document.querySelectorAll(".stage");

      function showStage(index) {
        stages.forEach((stage) => stage.classList.remove("active"));
        stages[index].classList.add("active");
      }

      function nextStage() {
        currentStage = (currentStage + 1) % stages.length;
        showStage(currentStage);
      }

      function prevStage() {
        currentStage = (currentStage - 1 + stages.length) % stages.length;
        showStage(currentStage);
      }
    </script>
  </body>
</html>
